{"version":3,"file":"remove-firebase-plugin-nodes.hook.js","sourceRoot":"","sources":["../../../src/scripts/hooks/after-prepare/remove-firebase-plugin-nodes.hook.ts"],"names":[],"mappings":";;AAAA,qCAAkD;AAElD,IAAM,6BAA6B,GAAG;IACpC,4DAA4D;IAC5D,6DAA6D;CAC9D,CAAA;AAED,MAAM,CAAC,OAAO,GAAG,UAAA,OAAO;IACtB,IAAM,EAAE,GAAG,OAAO,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAA;IAC7C,IAAM,IAAI,GAAG,OAAO,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAA;IACjD,IAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,EAAE,mBAAmB,CAAC,CAAA;IAC7E,IAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,kCAAkC,CAAC,CAAA;IAChF,IAAM,YAAY,GAAG,EAAE,CAAC,YAAY,CAAC,YAAY,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAA;IAExE,IAAI;QACF,IAAM,UAAQ,GAAG,IAAI,4BAAoB,CAAC,YAAY,CAAC,CAAA;QAEvD,6BAA6B,CAAC,OAAO,CAAC,UAAA,WAAW;YAC/C,OAAA,UAAQ,CAAC,mBAAmB,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC;QAAnD,CAAmD,CACpD,CAAA;QAED,EAAE,CAAC,aAAa,CAAC,YAAY,EAAE,UAAQ,CAAC,QAAQ,EAAE,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC,CAAA;KAC1E;IAAC,OAAO,GAAG,EAAE;QACZ,OAAO,CAAC,KAAK,CAAC,sEAAoE,YAAY,OAAI,EAAE,GAAG,CAAC,CAAA;KACzG;AACH,CAAC,CAAA","sourcesContent":["import { AndroidManifestUtils } from '../../utils'\n\nconst FIREBASE_PLUGIN_SERVICE_NODES = [\n  'org.apache.cordova.firebase.FirebasePluginMessagingService',\n  'org.apache.cordova.firebase.FirebasePluginInstanceIDService'\n]\n\nmodule.exports = context => {\n  const fs = context.requireCordovaModule('fs')\n  const path = context.requireCordovaModule('path')\n  const platformRoot = path.join(context.opts.projectRoot, 'platforms/android')\n  const manifestPath = path.join(platformRoot, 'app/src/main/AndroidManifest.xml')\n  const manifestFile = fs.readFileSync(manifestPath, { encoding: 'utf8' })\n\n  try {\n    const manifest = new AndroidManifestUtils(manifestFile)\n\n    FIREBASE_PLUGIN_SERVICE_NODES.forEach(serviceName =>\n      manifest.removeServiceNodeBy({ name: serviceName })\n    )\n\n    fs.writeFileSync(manifestPath, manifest.toString(), { encoding: 'utf8' })\n  } catch (err) {\n    console.error(`An error ocurred removing the FirebasePlugin service nodes from '${manifestPath}':`, err)\n  }\n}\n"]}